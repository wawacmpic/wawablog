{
    "version": "https://jsonfeed.org/version/1",
    "title": "曹远繁,娃娃 • All posts by \"nginx\" tag",
    "description": "记录个人生活",
    "home_page_url": "https://blog.wxl.pw",
    "items": [
        {
            "id": "https://blog.wxl.pw/2020/09/20/%E5%9C%A8%E5%AE%9D%E5%A1%94%E5%AE%89%E8%A3%85VERYNGINX-%E9%98%B2%E5%BE%A1CC%E6%94%BB%E5%87%BB/",
            "url": "https://blog.wxl.pw/2020/09/20/%E5%9C%A8%E5%AE%9D%E5%A1%94%E5%AE%89%E8%A3%85VERYNGINX-%E9%98%B2%E5%BE%A1CC%E6%94%BB%E5%87%BB/",
            "title": "在宝塔安装VERYNGINX 防御CC攻击",
            "date_published": "2020-09-20T08:20:04.000Z",
            "content_html": "<p>​\tVeryNginx 是一个功能强大而对网站友好的 Nginx 扩展程序。</p>\n<p>有的时候我们网站频繁遭受 CC 攻击，这导致我们很烦。</p>\n<p>这里推荐一款免费的 nginx 扩展来防御 cc 攻击。</p>\n<p>本文只介绍在宝塔面板下安装和使用，其它安装方法参考他的官方文档。</p>\n<h3 id=\"1-安装-nginx-openresty\"><a class=\"anchor\" href=\"#1-安装-nginx-openresty\">#</a> 1、安装 nginx openresty</h3>\n<p>安装 nginx 的时候一定要选择 nginx openresty ，因为 verynginx 是基于 openresty 的扩展。</p>\n<p>已安装其它版本 nginx 的可以选择切换版本。</p>\n<p><img data-src=\"https://cdnjsqa.wawacm.com/20200920162046.png\" alt=\"img\" /></p>\n<h4 id=\"2-下载verynginx代码\"><a class=\"anchor\" href=\"#2-下载verynginx代码\">#</a> 2、下载 verynginx 代码</h4>\n<p>去 github：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FsZXhhemhvdS9WZXJ5Tmdpbng=\">https://github.com/alexazhou/VeryNginx</span> 把 verynginx 代码下载下来，将 verynginx 目录上传到服务器 opt 目录下（这个根据自己喜好，可以上传到任意目录）</p>\n<p><img data-src=\"https://cdnjsqa.wawacm.com/20200920162055.png\" alt=\"img\" /></p>\n<h4 id=\"3-修改nginx配置文件\"><a class=\"anchor\" href=\"#3-修改nginx配置文件\">#</a> 3、修改 nginx 配置文件</h4>\n<p>软件商店找到 nginx》设置》配置修改，然后写入 in_external.conf 、in_http_block.conf 文件目录到下图所示位置。</p>\n<p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">include /opt/verynginx/nginx_conf/in_external.conf;</span><br></pre></td></tr></table></figure></p>\n<p><img data-src=\"https://cdnjsqa.wawacm.com/20200920162345.png\" alt=\"img\" /></p>\n<p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">include /opt/verynginx/nginx_conf/in_http_block.conf;</span><br></pre></td></tr></table></figure></p>\n<p><img data-src=\"https://cdnjsqa.wawacm.com/20200920162408.png\" alt=\"img\" /></p>\n<p>点击保存即可。（注意：这两个 conf 文件目录一定要和你上传的 verynginx 目录对应）</p>\n<h4 id=\"4-修改站点-配置文件\"><a class=\"anchor\" href=\"#4-修改站点-配置文件\">#</a> 4、修改站点 配置文件</h4>\n<p>网站》你的站点》设置》配置文件，填写 in_server_block.conf 文件位置。</p>\n<p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">include /opt/verynginx/nginx_conf/in_server_block.conf;</span><br></pre></td></tr></table></figure></p>\n<p><img data-src=\"https://cdnjsqa.wawacm.com/20200920162104.png\" alt=\"img\" /></p>\n<p>保存后就基本完成了。</p>\n<p>访问你的域名 /verynginx/index_zh.html 就可以进入 verynginx 管理界面了。</p>\n<p><strong>默认账号密码都是：verynginx</strong></p>\n<p><img data-src=\"https://cdnjsqa.wawacm.com/20200920162113.png\" alt=\"img\" /></p>\n<p>然后就是根据自己网站特点，去添加一些拦截规则和浏览器验证等等，这里就不详细介绍了。</p>\n<p>你还可以自己用 lua 去扩展更多功能，比如利用 ipset iptables 去自动拉黑 IP 等。</p>\n<p>相对于宝塔的防火墙插件，宝塔使用可能更简单，但是 verynginx 更方便于自己扩展，能定制的策略更多。</p>\n<p>注：宝塔 waf 与 verynginx 冲突，两者不能同时安装！</p>\n",
            "tags": [
                "nginx"
            ]
        }
    ]
}